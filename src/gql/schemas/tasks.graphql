fragment Task on Task {
  id
  code
  projectId
  unitId
  unitNumber
  status {
    id
    nameEn
    nameTh
    color
  }
  source {
    id
    nameEn
    nameTh
    color
  }
  customerName
  customerPhone
  checkInDate
  checkInRangeTime {
    id
    nameEn
    nameTh
  }
  insuranceDateDefault
  insuranceDate
  transferDate
  customerRequestedRepairDate
  createdAt
  updatedAt
  deletedAt
  project {
    id
    nameTh
    nameEn
  }
  unit {
    id
    projectId
    unitNumber
    houseNumber
  }
  area {
    id
    nameEn
    nameEn
  }
  building {
    id
    nameEn
    nameEn
  }
  floor {
    id
    nameEn
    nameEn
  }
}

fragment TaskStatusDto on TaskStatusDto {
  id
  nameEn
  nameTh
  color
}

query Tasks(
  $type: TaskType!
  $page: Int!
  $limit: Int!
  $searchText: String
  $statuses: [TaskStatus!]
  $projectId: String
  $unitIds: [String!]
) {
  tasks(
    type: $type
    page: $page
    limit: $limit
    searchText: $searchText
    statuses: $statuses
    projectId: $projectId
    unitIds: $unitIds
  ) {
    meta {
      ...IPaginateMeta
    }
    links {
      ...IPaginateLinks
    }
    items {
      ...Task
    }
  }
}

query TaskStatuses {
  taskStatuses {
    ...TaskStatusDto
  }
}
